<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will you be my Valentine?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: #fbeef0;
            background-image: radial-gradient(circle at 10% 30%, #ffd9e2 0%, #ffeef2 50%, #fff5f7 100%);
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Segoe UI', cursive, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow-x: hidden;
        }

        /* Love rain canvas */
        #hearts-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
            display: none;
        }

        .container {
            max-width: 650px;
            width: 90%;
            background: rgba(255, 250, 245, 0.85);
            backdrop-filter: blur(8px);
            border-radius: 70px 70px 50px 50px;
            box-shadow: 0 20px 30px rgba(255, 120, 160, 0.3), 
                        0 0 0 8px #ffe2e9, 
                        0 0 0 12px #ffb6c7;
            padding: 40px 30px 45px;
            text-align: center;
            border: 2px solid white;
            position: relative;
            z-index: 10;
            transition: all 0.2s;
        }

        /* Foto 1 - tampilan awal persis */
        .header-text {
            font-size: 2.5rem;
            color: #b3445c;
            text-shadow: 3px 3px 0 #ffc1d0;
            margin-bottom: 8px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .header-text small {
            font-size: 1.8rem;
            color: #a13f55;
        }

        .dear-someone {
            font-size: 2.8rem;
            font-weight: 800;
            color: #8f334c;
            background: #fff3f5;
            display: inline-block;
            padding: 12px 40px;
            border-radius: 60px;
            margin: 15px 0 5px;
            box-shadow: 0 6px 0 #e08a9f;
            border: 2px solid white;
        }

        .question-box {
            background: #ffdee6;
            border-radius: 100px;
            padding: 15px 20px;
            margin: 20px 0 25px;
            border: 4px solid #ffb0c2;
            box-shadow: inset 0 -4px 0 #db8fa0;
        }

        .will-you {
            font-size: 2.2rem;
            color: #802b43;
            font-weight: 600;
        }

        .big-question {
            font-size: 4rem;
            font-weight: 900;
            color: #ac1f45;
            line-height: 1.2;
            letter-spacing: 2px;
        }

        .yes-no-group {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 40px;
            margin: 20px 0 15px;
            position: relative;
        }

        .yes-button {
            background: #ff4d6d;
            border: none;
            color: white;
            font-size: 3.5rem;
            font-weight: bold;
            padding: 12px 50px;
            border-radius: 80px;
            box-shadow: 0 12px 0 #9f2b48, 0 10px 25px #ff8da8;
            cursor: pointer;
            transition: 0.07s;
            border: 4px solid #ffeef2;
            transform: scale(1);
            min-width: 220px;
        }

        .yes-button:active {
            transform: translateY(8px);
            box-shadow: 0 4px 0 #9f2b48, 0 12px 25px #ffb0c6;
        }

        /* No button wrapper for absolute positioning inside */
        .no-wrapper {
            position: relative;
            width: 130px;
            height: 90px;
            display: inline-block;
        }

        .no-button {
            background: #3f2a30;
            border: none;
            color: #ffd2d2;
            font-size: 2.8rem;
            font-weight: bold;
            padding: 8px 25px;
            border-radius: 60px;
            box-shadow: 0 10px 0 #1f1217, 0 8px 15px #5a3e48;
            cursor: pointer;
            border: 3px solid #ffb6b6;
            position: absolute;
            left: 0;
            top: 0;
            width: 130px;
            text-align: center;
            transition: 0.05s;
            pointer-events: auto;
            z-index: 30;
        }

        .choose-wisely {
            font-size: 1.6rem;
            color: #b3546b;
            background: #ffeef4;
            display: inline-block;
            padding: 5px 30px;
            border-radius: 40px;
            margin-top: 5px;
            border: 2px dashed #ff99b4;
        }

        /* Result area - foto kedua & ketiga */
        .result-area {
            margin-top: 30px;
            background: #ffe5ec;
            border-radius: 70px 70px 40px 40px;
            padding: 25px 20px 30px;
            border: 6px solid #ffb3c6;
            box-shadow: 0 12px 0 #e690aa;
            transition: 0.4s;
        }

        .yay-message {
            font-size: 2.5rem;
            font-weight: 700;
            color: #b13055;
            background: white;
            display: inline-block;
            padding: 15px 35px;
            border-radius: 60px;
            margin-bottom: 20px;
            border: 4px solid #ffa5bc;
            transform: rotate(-0.5deg);
            box-shadow: 0 5px 0 #e07c9a;
        }

        .hug-box {
            background: #fff0f3;
            border-radius: 70px;
            padding: 25px 20px;
            border: 6px solid #ffbccd;
            box-shadow: inset 0 -5px 0 #e7a1b4;
        }

        .hug-text-line {
            font-size: 2.2rem;
            font-weight: 600;
            color: #782b45;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 10px;
        }

        .dots-loading {
            font-size: 2.8rem;
            letter-spacing: 8px;
            color: #bc4e6e;
            min-width: 100px;
            text-align: left;
        }

        .loading-bar-container {
            width: 80%;
            max-width: 320px;
            height: 28px;
            background: #ffb9cd;
            border-radius: 40px;
            margin: 15px auto 12px;
            border: 4px solid white;
            overflow: hidden;
            box-shadow: inset 0 3px 6px rgba(0,0,0,0.1);
        }

        .loading-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff6687, #ff94b2, #ffb8cc);
            border-radius: 40px;
            transition: width 2.8s cubic-bezier(0.2, 0.9, 0.3, 1);
        }

        .hug-emoji-big {
            font-size: 4rem;
            margin: 10px 0 5px;
            filter: drop-shadow(0 8px 6px #e85c86);
            animation: pulse 1.5s infinite alternate;
        }

        @keyframes pulse {
            0% { transform: scale(1) rotate(-2deg); }
            100% { transform: scale(1.15) rotate(2deg); }
        }

        .loading-text-below {
            font-size: 1.9rem;
            color: #9a3f5a;
            background: #ffe2ec;
            display: inline-block;
            padding: 8px 28px;
            border-radius: 50px;
            margin: 12px 0 5px;
            border: 3px solid #ffa0b9;
        }

        .final-line {
            font-size: 2.2rem;
            color: #c2224b;
            font-weight: 600;
            margin-top: 18px;
            background: rgba(255,255,255,0.7);
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
        }

        .hidden {
            display: none !important;
        }

        /* Foto ketiga: ada tambahan "I guess there's only one answer" tapi kita munculkan saat klik yes? 
           kita bisa tambahkan elemen itu di result area bagian atas */
        .only-one-answer {
            font-size: 2rem;
            color: #9f3d57;
            background: #ffdae3;
            padding: 10px 30px;
            border-radius: 50px;
            margin-bottom: 15px;
            border: 3px solid #ff99b2;
        }
    </style>
</head>
<body>

    <canvas id="hearts-canvas"></canvas>

    <div class="container" id="mainContainer">
        <!-- AWAL: persis foto pertama -->
        <div class="header-text">Why is clicking ‚Äòno‚Äô this hard?</div>
        <div class="dear-someone">Dear Someone</div>   <!-- Jennifer diganti Someone -->
        <div class="question-box">
            <div class="will-you">Will you be my Valentine?</div>
            <div class="big-question">YES! ü•∞üíñ</div>
        </div>

        <div class="yes-no-group">
            <button class="yes-button" id="yesBtn">YES</button>
            <div class="no-wrapper" id="noWrapper">
                <button class="no-button" id="noBtn">NO</button>
            </div>
        </div>
        <div class="choose-wisely">(choose wisely)</div>

        <!-- HASIL (foto kedua & ketiga digabung) - hidden mula2 -->
        <div id="resultPanel" class="result-area hidden">
            <!-- baris "I guess there's only one answer" (foto ketiga) -->
            <div class="only-one-answer">üí≠ I guess there's only one answer</div>

            <!-- Yay message persis foto kedua & ketiga -->
            <div class="yay-message">Yay! I knew you'd say yes!</div>

            <!-- Virtual hug dengan loading -->
            <div class="hug-box">
                <div class="hug-text-line">
                    <span>sending virtual hug</span>
                    <span class="dots-loading" id="loadingDots">......</span>
                </div>
                <div class="loading-bar-container">
                    <div class="loading-fill" id="loadingFill"></div>
                </div>
                <div class="hug-emoji-big" id="hugEmoji">ü§ó</div>
                <div class="loading-text-below" id="loadingCaption">loading...</div>
            </div>

            <!-- Baris terakhir "You've made me the happiest‚ù§Ô∏è" -->
            <div class="final-line">You've made me the happiest ‚ù§Ô∏è</div>
        </div>
    </div>

    <script>
        (function() {
            // Elemen
            const noBtn = document.getElementById('noBtn');
            const noWrapper = document.getElementById('noWrapper');
            const yesBtn = document.getElementById('yesBtn');
            const resultPanel = document.getElementById('resultPanel');
            const loadingFill = document.getElementById('loadingFill');
            const loadingDots = document.getElementById('loadingDots');
            const hugEmoji = document.getElementById('hugEmoji');
            const canvas = document.getElementById('hearts-canvas');
            const ctx = canvas.getContext('2d');

            // ========== CANVAS LOVE RAIN ==========
            let hearts = [];
            let animFrame = null;
            let w, h;

            function resizeCanvas() {
                w = window.innerWidth;
                h = window.innerHeight;
                canvas.width = w;
                canvas.height = h;
            }
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();

            class Heart {
                constructor() {
                    this.reset();
                }
                reset() {
                    this.x = Math.random() * w;
                    this.y = Math.random() * -h - 50; // mulai dari atas
                    this.size = 22 + Math.random() * 30; // 22-52px
                    this.speed = 2 + Math.random() * 4;
                    this.opacity = 0.7 + Math.random() * 0.3;
                    this.color = `hsla(${340 + Math.random()*25}, 85%, 70%, ${this.opacity})`;
                }
                update() {
                    this.y += this.speed;
                    if (this.y > h + this.size) {
                        this.reset();
                        this.y = -this.size;
                    }
                }
                draw() {
                    ctx.font = `${this.size}px 'Segoe UI', 'Arial Unicode MS', 'Apple Color Emoji', 'Comic Sans MS', sans-serif`;
                    ctx.fillStyle = this.color;
                    ctx.fillText('‚ù§Ô∏è', this.x, this.y);
                }
            }

            function initHearts(count = 30) {
                hearts = [];
                for (let i = 0; i < count; i++) {
                    const hh = new Heart();
                    hh.y = Math.random() * -h - 100;
                    hh.x = Math.random() * w;
                    hearts.push(hh);
                }
            }

            function drawHearts() {
                ctx.clearRect(0, 0, w, h);
                hearts.forEach(h => {
                    h.update();
                    h.draw();
                });
                animFrame = requestAnimationFrame(drawHearts);
            }

            function startLoveRain() {
                canvas.style.display = 'block';
                initHearts(35);
                if (animFrame) cancelAnimationFrame(animFrame);
                animFrame = requestAnimationFrame(drawHearts);
            }

            function stopLoveRain() {
                if (animFrame) cancelAnimationFrame(animFrame);
                ctx.clearRect(0, 0, w, h);
                canvas.style.display = 'none';
            }

            // ========== NO BUTTON MENJADI TIDAK BISA DIKLIK ==========
            // fungsi untuk memindahkan tombol No secara random di dalam wrapper
            function moveNoButton() {
                if (!noWrapper || !noBtn) return;

                const wrapperRect = noWrapper.getBoundingClientRect();
                const btnRect = noBtn.getBoundingClientRect();

                // hitung maksimal pergerakan agar tetap di dalam wrapper
                let maxX = wrapperRect.width - btnRect.width;
                let maxY = wrapperRect.height - btnRect.height;

                // kalau nilainya negatif (mungkin wrapper terlalu kecil), set 0
                maxX = Math.max(0, maxX);
                maxY = Math.max(0, maxY);

                let newX = Math.random() * maxX;
                let newY = Math.random() * maxY;

                noBtn.style.left = newX + 'px';
                noBtn.style.top = newY + 'px';
            }

            // panggil pertama kali
            setTimeout(moveNoButton, 20);

            // setiap kali hover atau coba klik, lari
            noBtn.addEventListener('mouseenter', moveNoButton);
            noBtn.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                moveNoButton();
            });

            // tambahan: setiap 300ms bergerak sedikit (biar benar-benar ga bisa)
            setInterval(moveNoButton, 280);

            // saat resize, atur ulang posisi
            window.addEventListener('resize', () => setTimeout(moveNoButton, 30));

            // ========== YES BUTTON ==========
            yesBtn.addEventListener('click', (e) => {
                e.preventDefault();

                // munculkan result panel jika masih hidden
                if (resultPanel.classList.contains('hidden')) {
                    resultPanel.classList.remove('hidden');

                    // love rain start
                    startLoveRain();

                    // reset loading bar
                    loadingFill.style.width = '0%';

                    // animasi titik-titik (loading dots)
                    let dotCount = 0;
                    const dotsInterval = setInterval(() => {
                        if (!resultPanel.classList.contains('hidden')) {
                            dotCount = (dotCount + 1) % 7; // 0-6
                            let dotsString = '';
                            for (let i = 0; i < dotCount; i++) dotsString += '.';
                            // padding supaya lebar konsisten
                            while (dotsString.length < 6) dotsString += ' ';
                            loadingDots.innerText = dotsString;
                        } else {
                            clearInterval(dotsInterval);
                        }
                    }, 280);

                    // jalankan loading bar
                    setTimeout(() => {
                        loadingFill.style.width = '100%';
                    }, 100);

                    // ganti emoji setelah beberapa saat
                    setTimeout(() => {
                        hugEmoji.innerHTML = '‚ù§Ô∏è ü§ó ‚ù§Ô∏è';
                    }, 2200);

                    // opsional: teks loading bisa berubah (tetap "loading..." sesuai foto)
                }

                // no button ikut lari
                moveNoButton();
            });

            // inisialisasi loadingDots dengan 6 titik
            loadingDots.innerText = '......';

            // supaya mirip foto, result panel awalnya hidden, dan saat YES muncul semua elemen
            // foto ketiga "I guess there's only one answer" sudah ada di panel
        })();
    </script>
</body>
</html>
